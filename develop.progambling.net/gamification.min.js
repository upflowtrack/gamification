!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function t(e,t,n,a,r,s,o){try{var i=e[s](o),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(a,r)}function n(e){return function(){var n=this,a=arguments;return new Promise(function(r,s){var o=e.apply(n,a);function i(e){t(o,r,s,i,c,"next",e)}function c(e){t(o,r,s,i,c,"throw",e)}i(void 0)})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,d(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function s(n,a,r,s){var c=a&&a.prototype instanceof i?a:i,u=Object.create(c.prototype);return l(u,"_invoke",function(n,a,r){var s,i,c,l=0,u=r||[],d=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return s=t,i=0,c=e,m.n=n,o}};function p(n,a){for(i=n,c=a,t=0;!d&&l&&!r&&t<u.length;t++){var r,s=u[t],p=m.p,v=s[2];n>3?(r=v===a)&&(c=s[(i=s[4])?5:(i=3,3)],s[4]=s[5]=e):s[0]<=p&&((r=n<2&&p<s[1])?(i=0,m.v=a,m.n=s[1]):p<v&&(r=n<3||s[0]>a||a>v)&&(s[4]=n,s[5]=a,m.n=v,i=0))}if(r||n>1)return o;throw d=!0,a}return function(r,u,v){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,v),i=u,c=v;(t=i<2?e:c)||!d;){s||(i?i<3?(i>1&&(m.n=-1),p(i,c)):m.n=c:m.v=c);try{if(l=2,s){if(i||(r="next"),t=s[r]){if(!(t=t.call(s,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=s.return)&&t.call(s),i<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),i=1);s=e}else if((t=(d=m.n<0)?c:n.call(a,m))!==o)break}catch(t){s=e,i=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,r,s),!0),u}var o={};function i(){}function u(){}function d(){}t=Object.getPrototypeOf;var m=[][a]?t(t([][a]())):(l(t={},a,function(){return this}),t),p=d.prototype=i.prototype=Object.create(m);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,r,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,l(p,"constructor",d),l(d,"constructor",u),u.displayName="GeneratorFunction",l(d,r,"GeneratorFunction"),l(p),l(p,r,"Generator"),l(p,a,function(){return this}),l(p,"toString",function(){return"[object Generator]"}),(c=function(){return{w:s,m:v}})()}function l(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}l=function(e,t,n,a){function s(t,n){l(e,t,function(e){return this._invoke(t,n,e)})}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(s("next",0),s("throw",1),s("return",2))},l(e,t,n,a)}function u(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}var m="/wp-content/plugins/gamification",p="https://dev5.casinosanalyzer.com/api/gamification/visitor";function v(e,t){return new Promise(function(n,a){if(t&&window[t])return n(window[t]);var r=document.querySelector('script[src="'.concat(e,'"]'));if(r){if(r.readyState&&("loaded"===r.readyState||"complete"===r.readyState)||t&&window[t])return n(t?window[t]:void 0);var s=!1,o=setTimeout(function(){s||(s=!0,i(),a(new Error("Script load timeout: "+e)))},1e4),i=function(){r.removeEventListener("load",c),r.removeEventListener("error",l)},c=function(){s||(s=!0,clearTimeout(o),i(),n(t?window[t]:void 0))},l=function(){s||(s=!0,clearTimeout(o),i(),a(new Error("Failed to load script "+e)))};return r.addEventListener("load",c),void r.addEventListener("error",l)}var u=document.createElement("script");u.src=e,u.async=!0,u.onload=function(){return n(t?window[t]:void 0)},u.onerror=function(){return a(new Error("Failed to load script "+e))},document.head.appendChild(u)})}function h(){return new Promise(function(e,t){var n=0,a=function(){var r;n++,null!==(r=window.amplitude)&&void 0!==r&&null!==(r=r.getInstance("gamification"))&&void 0!==r&&r.getDeviceId()?e():n>=50?t(new Error("Amplitude initialization timeout")):setTimeout(a,100)};a()})}function g(){return f.apply(this,arguments)}function f(){return(f=n(c().m(function e(){var t,n;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,v("https://cdn.amplitude.com/libs/amplitude-8.21.4-min.js","amplitude");case 1:e.n=3;break;case 2:throw e.p=2,n=e.v,console.error("Failed to load Amplitude SDK",n),document.dispatchEvent(new CustomEvent("gamification:error",{detail:n})),n;case 3:if(window.amplitude&&window.amplitude.getInstance){e.n=4;break}throw t=new Error("Amplitude SDK is not available"),console.error(t.message),document.dispatchEvent(new CustomEvent("gamification:error",{detail:t})),t;case 4:return window.amplitude.getInstance("gamification").init("26713950747f0ef6f797aac3907e9e8c",null,{saveEvents:!0,includeUtm:!0,includeReferrer:!0}),e.n=5,h();case 5:return e.a(2,window.amplitude.getInstance("gamification").getDeviceId())}},e,null,[[0,2]])}))).apply(this,arguments)}function y(){return b.apply(this,arguments)}function b(){return(b=n(c().m(function e(){var t,n,a,r,s,o,i;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=null===(t=window.amplitude)||void 0===t||null===(t=t.getInstance("gamification"))||void 0===t?void 0:t.getDeviceId()){e.n=1;break}throw a=new Error("Amplitude device ID is unavailable"),console.error(a.message),a;case 1:return r={tenant_domain:document.location.hostname,amplitude_device_id:n},e.p=2,e.n=3,fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:if((s=e.v).ok){e.n=4;break}throw o=new Error("HTTP ".concat(s.status,": ").concat(s.statusText)),console.error("Unable to fetch visitor gamification data",o.message),o;case 4:return e.n=5,s.json();case 5:return e.a(2,e.v);case 6:throw e.p=6,i=e.v,console.error("Gamification API request failed",i.message),i;case 7:return e.a(2)}},e,null,[[2,6]])}))).apply(this,arguments)}function _(e,t){return w.apply(this,arguments)}function w(){return(w=n(c().m(function e(t,n){var a,r,s,o;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a="".concat(p,"/").concat(t,"/bonus/").concat(n,"/purchase"),e.n=1,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"}});case 1:return r=e.v,e.n=2,r.json();case 2:if(s=e.v,r.ok){e.n=3;break}throw new Error(s.message);case 3:return e.a(2,{success:!0,message:s.message});case 4:return e.p=4,o=e.v,console.error("An error has occurred while purchasing a bonus: ".concat(o.message)),e.a(2,{success:!1,message:o.message})}},e,null,[[0,4]])}))).apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return(k=n(c().m(function e(t){var n,a,r,s,o,i,l;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=null===(n=window.amplitude)||void 0===n||null===(n=n.getInstance("gamification"))||void 0===n?void 0:n.getDeviceId()){e.n=1;break}throw r=new Error("Amplitude device ID is unavailable"),console.error(r.message),r;case 1:return s={tenant_domain:document.location.hostname,amplitude_device_id:a,email:t},e.p=2,e.n=3,fetch("".concat(p,"/contact"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 3:if((o=e.v).ok){e.n=4;break}throw i=new Error("HTTP ".concat(o.status,": ").concat(o.statusText)),console.error("Unable to add contact",i.message),i;case 4:return e.n=5,o.json();case 5:return e.a(2,e.v);case 6:throw e.p=6,l=e.v,console.error("Gamification API request failed",l.message),l;case 7:return e.a(2)}},e,null,[[2,6]])}))).apply(this,arguments)}var T=function(e){var t=e.balanceChange,n=e.questDetails;if(t){var a=document.querySelector("[data-element=coins-balance]"),r=(parseInt(a.textContent)||0)+t;a.textContent=r>999?"999+":r,document.dispatchEvent(new CustomEvent("balanceChanged",{detail:{balanceChange:t,questDetails:n}}))}},S=function(e){var t=e.quest,n=e.type;document.dispatchEvent(new CustomEvent("questUpdated",{detail:{quest:t,type:n}}))},L=function(e){var t=e.reward;document.dispatchEvent(new CustomEvent("rewardRedeemed",{detail:{reward:t}}))},P=function(){return r(function e(){a(this,e),this.client=null,this.token=null,this.visitorId=null,this.channels={},this.isConnecting=!1,this.isConnected=!1,this.subscriptions=new Map},[{key:"disconnect",value:(o=n(c().m(function e(){return c().w(function(e){for(;;)switch(e.n){case 0:if(this.client){this.subscriptions.forEach(function(e){try{e.unsubscribe()}catch(e){console.warn("Error unsubscribing:",e)}}),this.subscriptions.clear();try{this.client.disconnect()}catch(e){console.warn("Error disconnecting client:",e)}this.client=null,this.isConnected=!1,this.isConnecting=!1,console.log("Centrifuge disconnected")}case 1:return e.a(2)}},e,this)})),function(){return o.apply(this,arguments)})},{key:"init",value:(s=n(c().m(function e(t,n){var a,r=this;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isConnecting){e.n=1;break}return console.warn("Centrifuge is already connecting. Skipping duplicate init call."),e.a(2,this.client);case 1:if(!this.isConnected||!this.client||this.visitorId!==t||this.token!==n){e.n=2;break}return console.log("Centrifuge is already connected with same credentials. Reusing existing connection."),e.a(2,this.client);case 2:if(!this.isConnected||this.visitorId===t&&this.token===n){e.n=3;break}return console.log("Credentials changed. Disconnecting existing connection."),e.n=3,this.disconnect();case 3:if(this.visitorId=t,this.token=n,this.visitorId&&this.token){e.n=4;break}return console.warn("Visitor ID or token is missing."),e.a(2);case 4:return this.channels={balance:"visitor_balance:#".concat(this.visitorId),events:"visitor_events:#".concat(this.visitorId),quests:"visitor_quests:#".concat(this.visitorId),rewards:"visitor_rewards:#".concat(this.visitorId)},this.isConnecting=!0,e.p=5,e.n=6,v("https://cdn.jsdelivr.net/npm/centrifuge@5.4.0/dist/centrifuge.js","Centrifuge");case 6:return this.client=new Centrifuge("wss://dev5.casinosanalyzer.com/centrifugo/connection/websocket",{token:this.token,debug:!0}),this.subscribeToChannel(this.channels.balance,T),this.subscribeToChannel(this.channels.quests,S),this.subscribeToChannel(this.channels.rewards,L),this.subscribeToChannel(this.channels.events),this.client.connect(),this.isConnected=!0,this.isConnecting=!1,window.getCentrifugeClient=function(){return r.client},console.log("Centrifuge initialized successfully with visitor ID:",this.visitorId),e.a(2,this.client);case 7:throw e.p=7,a=e.v,this.isConnecting=!1,this.isConnected=!1,console.warn("Error while connecting to WebSocket server:",a),a;case 8:return e.a(2)}},e,this,[[5,7]])})),function(e,t){return s.apply(this,arguments)})},{key:"subscribeToChannel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(this.client){if(this.subscriptions.has(e))return console.log("Already subscribed to channel: ".concat(e)),this.subscriptions.get(e);var n=this.client.newSubscription(e);return n.on("publication",function(e){var n=e.data;return t(n)}),n.subscribe(),this.subscriptions.set(e,n),n}console.warn("Centrifuge client is not initialized.")}},{key:"publishToChannel",value:(t=n(c().m(function e(t,n){var a,r;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.client){e.n=1;break}return console.warn("Centrifuge client is not initialized."),e.a(2);case 1:if(e.p=1,a=this.subscriptions.get(t)){e.n=2;break}return console.warn("No subscription exists for channel: ".concat(t)),e.a(2);case 2:return e.n=3,a.publish(n);case 3:e.n=5;break;case 4:e.p=4,r=e.v,console.warn("Failed to publish to channel ".concat(t,":"),r);case 5:return e.a(2)}},e,this,[[1,4]])})),function(e,n){return t.apply(this,arguments)})},{key:"publishCustomEvent",value:(e=n(c().m(function e(t){var n,a=arguments;return c().w(function(e){for(;;)switch(e.n){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.n=1,this.publishToChannel(this.channels.events,{type:t,body:n,domain:document.location.hostname,date:(new Date).toISOString()});case 1:return e.a(2)}},e,this)})),function(t){return e.apply(this,arguments)})}]);var e,t,s,o}(),C=new P,B=function(){return r(function e(){var t=this;a(this,e),s(this,"CDN_LOGO","https://casinosanalyzer.com"),s(this,"HEADER",document.querySelector("#gmHeaderCoin")),s(this,"DAY_COINS",[20,30,40,50,60]),s(this,"DEFAULT_COIN",70),s(this,"QUESTS_TAB","gmQuestPopupQuests"),s(this,"REWARDS_TAB","gmQuestPopupRewards"),s(this,"headerQuest",void 0),s(this,"bodyQuest",void 0),s(this,"popupQuest",void 0),s(this,"BONUS_STATUS",{BUY:"BUY",MORE:"MORE",GET:"GET"}),s(this,"renderHeaderCoin",function(){if(t.HEADER){var e=localStorage.getItem("gm-coinBalance"),n=e?t.getHeaderCoinBalance(e):t.getHeaderCoinBalance();t.HEADER.className="gm-header__coin",t.HEADER.innerHTML='<img src="'.concat(m,'/img/coin.webp" alt="header__coin" width="20" height="20"><span data-element="coins-balance">').concat(n,"</span>"),t.HEADER.addEventListener("click",t.showPopup.bind(t,t.REWARDS_TAB))}}),s(this,"toggleBodyScrollLock",function(e){if(e){var t=window.scrollY;document.body.dataset.scrollY=t,document.body.style.position="fixed",document.body.style.top="-".concat(t,"px"),document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%"}else{var n=parseInt(document.body.dataset.scrollY||"0",10);document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",window.scrollTo(0,n)}})},[{key:"init",value:function(){this.visitor={coins_balance:0},this.quests=[],this.owned=[],this.purchasable=[],this.renderHeaderCoin(),this.renderBodyCoin()}},{key:"fetchData",value:function(e){var t=e.data,n=t.bonuses,a=t.quests,r=t.visitor;this.visitor=r,this.quests=a,this.owned=n.owned,this.purchasable=n.purchasable,this.handleOngoingQuest(),this.setHeaderCoinBalance();var s=document.querySelector(".gm-questPopup__tab.active");s&&this.renderData(s.dataset.tab)}},{key:"setVisitorCoinBalance",value:function(e){this.visitor.coins_balance+=e,localStorage.setItem("gm-coinBalance",JSON.stringify(this.visitor.coins_balance))}},{key:"setHeaderCoinBalance",value:function(){var e=document.querySelector('#gmHeaderCoin [data-element="coins-balance"]');e&&(e.innerHTML=this.getHeaderCoinBalance())}},{key:"renderData",value:function(e){var t=this,n=document.querySelector(".gm-questPopup__skeleton");n&&n.remove();var a=document.querySelector(".gm-questPopup__popup");a&&(a.append(this.renderPopupScroll()),this.renderPopupRewards(),this.renderPopupQuests(),this.toggleTab(e),window.innerWidth<=768&&this.bonusesCarousel(),window.addEventListener("resize",function(){window.innerWidth<=768&&(!document.querySelectorAll(".gm-carousel-indicators").length&&t.bonusesCarousel())}))}},{key:"getHeaderCoinBalance",value:function(e){var t=e||this.visitor.coins_balance;return t>999?"999+":t}},{key:"getSkeleton",value:function(){var e=document.createElement("div");return e.className="skeleton__item",e.innerHTML='<div class="skeleton__item--content">\n\t\t\t\t<div class="skeleton skeleton--line"></div>\n\t\t\t\t<div class="skeleton skeleton--line skeleton--description"></div>\n\t\t\t</div>\n\t\t\t<div class="skeleton skeleton--circle"></div>',e}},{key:"renderSkeleton",value:function(){var e=document.createElement("div");e.className="gm-questPopup__skeleton";for(var t=0;t<3;t++)e.append(this.getSkeleton());return e}},{key:"renderBodyCoin",value:function(){var e=document.createElement("div");e.id="gmBodyCoin",e.className="gm-body__coin",e.innerHTML='<img src="'.concat(m,'/img/coin.webp" alt="body__coin" width="46" height="46">'),document.body.append(e),this.bodyQuest=e,e.addEventListener("click",this.showPopup.bind(this,this.QUESTS_TAB))}},{key:"renderBodyTimer",value:function(e,t){var n=this;this.bodyQuest.innerHTML='\n\t\t\t<div class="gm-body__timer">\n\t\t\t\t<div class="countdown-timer">\n\t        <svg class="timer-svg" viewBox="0 0 100 100">\n\t            <defs>\n\t                <linearGradient id="progressGradient" x1="0%" y1="0%" x2="0%" y2="100%">\n\t                  <stop offset="0%" stop-color="#FBF100" />\n\t                  <stop offset="100%" stop-color="#F6B600" />\n\t                </linearGradient>\n\t            </defs>\n\t            <circle class="timer-bg" cx="50" cy="50" r="45"></circle>\n\t            <circle class="timer-progress" cx="50" cy="50" r="45" stroke="url(#progressGradient)"></circle>\n\t        </svg>\n\t        <div class="timer-number" id="timer-number">'.concat(e,"</div>\n\t    </div>\n\t\t\t</div>\n\t\t"),this.bodyQuest.classList.add("gm-body--inactive");var a=e,r=a,s=document.getElementById("timer-number"),o=document.querySelector(".timer-progress"),i=2*Math.PI*o.r.baseVal.value,c=function(){s.textContent=r;var e=i*(1-r/a);o.style.strokeDashoffset=e,--r<0&&(clearInterval(l),s.textContent="0",o.style.strokeDashoffset=i,t(),n.renderBodySuccess())};s.textContent=a,o.style.strokeDasharray=i,o.style.strokeDashoffset=0;var l=setInterval(c,1e3);c(),this.bodyQuest.classList.add("bodyQuest--show"),this.bodyQuest.addEventListener("click",function(e){e.stopPropagation(),n.showPopup.call(n)})}},{key:"renderBodySuccess",value:function(){var e=this;this.bodyQuest.innerHTML='<div class="gm-body__success">\n\t\t\t<svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t    <rect class="green-circle" x="2" y="2" width="40" height="40" rx="20" fill="#E4FFF1"/>\n\t\t    <rect class="green-circle" x="2" y="2" width="40" height="40" rx="20" fill="url(#paint0_linear_2555_2174)"/>\n\t\t    <rect class="green-circle" x="2" y="2" width="40" height="40" rx="20" stroke="url(#paint1_linear_2555_2174)" stroke-width="4"/>\n\t\t    <path class="checkmark" d="M19.3748 26.4321L30.7491 14.8335L32.5 16.6175L19.3748 30.0002L11.5 21.9708L13.2497 20.1868L19.3748 26.4321Z" fill="white"/>\n\t\t    <defs>\n\t\t        <linearGradient id="paint0_linear_2555_2174" x1="-7.31511e-08" y1="29" x2="44" y2="16" gradientUnits="userSpaceOnUse">\n\t\t            <stop stop-color="#04C478"/>\n\t\t            <stop offset="1" stop-color="#5CF17C"/>\n\t\t        </linearGradient>\n\t\t        <linearGradient id="paint1_linear_2555_2174" x1="-7.31511e-08" y1="29" x2="44" y2="16" gradientUnits="userSpaceOnUse">\n\t\t            <stop stop-color="#04C478"/>\n\t\t            <stop offset="1" stop-color="#5CF17C"/>\n\t\t        </linearGradient>\n\t\t    </defs>\n\t\t</svg>\n\t\t</div>',this.bodyQuest.classList.add("gm-body__show"),this.bodyQuest.classList.remove("gm-body--inactive"),this.bodyQuest.addEventListener("click",function(t){t.stopPropagation(),e.showPopup.call(e,e.QUESTS_TAB)})}},{key:"toggleTab",value:function(e){document.querySelectorAll(".gm-questPopup__tab.active, .gm-questPopup__block.active").forEach(function(e){return e.classList.remove("active")}),document.querySelectorAll('[data-tab="'.concat(e,'"]')).forEach(function(e){return e.classList.add("active")}),this.renderPopupTitle(e);var t=document.querySelector(".gm-questPopup__block.active");t&&t.scrollIntoView()}},{key:"showPopup",value:function(e){this.popupQuest&&this.popupQuest.innerHTML||this.renderPopup(e),this.toggleTab(e),this.popupQuest.classList.add("show"),this.toggleBodyScrollLock(!0)}},{key:"hidePopup",value:function(){if(this.popupQuest.classList.remove("show"),this.toggleBodyScrollLock(!1),localStorage.getItem("gm-bannerNewBonuses")){var e=document.querySelector('[data-element="gmRewardsBanner"]');e&&e.remove()}}},{key:"renderPopup",value:function(e){var t=this,n=document.createElement("div");n.id="gmQuestPopup",n.className="gm-questPopup__wrapper show";var a=document.createElement("div");a.className="gm-questPopup__popup",a.append(this.renderPopupClose(),this.renderPopupCoin(),this.renderPopupHeader(),this.renderPopupTabs()),a.addEventListener("click",function(e){return e.stopPropagation()}),n.append(a),n.addEventListener("click",function(){t.hidePopup.call(t)}),document.body.append(n),this.quests.length?this.renderData(e):a.append(this.renderSkeleton()),this.popupQuest=n}},{key:"renderPopupClose",value:function(){var e=this,t=document.createElement("div");return t.className="gm-questPopup__close",t.innerHTML='<img src="'.concat(m,'/img/close.webp" alt="close">'),t.addEventListener("click",function(t){t.stopPropagation(),e.hidePopup.call(e)}),t}},{key:"renderPopupCoin",value:function(){var e=document.createElement("div");return e.className="gm-questPopup__coin",e.innerHTML='<img src="'.concat(m,'/img/coin.webp" alt="coin">'),e}},{key:"renderPopupHeader",value:function(){var e=document.createElement("div");return e.className="gm-questPopup__header",e.innerHTML='<p class="gm-questPopup__title" data-element="gm-questPopupTitle">Quests</p><p class="gm-questPopup__description" data-element="gm-questPopupDescription">Earn coins - spend them on exclusive bonuses</p>',e}},{key:"renderPopupTabs",value:function(){var e=this,t=document.createElement("div");t.className="gm-questPopup__tabs";var n=document.createElement("div");n.className="gm-questPopup__tab",n.dataset.element="gmQuestPopupQuestsTab",n.dataset.tab="gmQuestPopupQuests",n.innerHTML="Daily Quests",n.addEventListener("click",function(){return e.toggleTab.call(e,e.QUESTS_TAB)});var a=document.createElement("div");return a.className="gm-questPopup__tab",a.dataset.element="gmQuestPopupRewardsTab",a.dataset.tab="gmQuestPopupRewards",a.innerHTML="My Rewards",a.addEventListener("click",function(){return e.toggleTab.call(e,e.REWARDS_TAB)}),t.append(n,a),t}},{key:"renderPopupScroll",value:function(){var e=document.createElement("div");e.className="gm-questPopup__scroll";var t=document.createElement("div");t.className="gm-questPopup__block gm-questPopupQuests",t.dataset.element="gmQuestPopupQuestsBlock",t.dataset.tab="gmQuestPopupQuests";var n=document.createElement("div");return n.className="gm-questPopup__block gm-questPopupRewards",n.dataset.element="gmQuestPopupRewardsBlock",n.dataset.tab="gmQuestPopupRewards",e.append(t,n),e}},{key:"renderPopupQuests",value:function(){var e=this,t=document.querySelector('[data-element="gmQuestPopupQuestsBlock"]');t&&(this.renderPopupTitle(this.QUESTS_TAB),t.innerHTML||this.quests.forEach(function(n){return t.append(e.renderQuest(n))}))}},{key:"renderQuest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.name,a=e.description,r=e.type,s=e.reward,o=e.event,i=e.isCompleted,c=e.isClickable,l=e.isProgressShown,u=e.progress,d=e.completionPaths,m=e.redirectUrl,p=e.isDispatchable,v=l?this.getProgressRender(u):"",h=l?this.getProgressStyle(u):"",g=document.createElement("div");return g.className="gm-questPopup__quest",g.dataset.id=t,g.dataset.type=r,g.innerHTML='\n        <div class="gm-questPopup__content">\n            <p class="gm-questPopup__content--title">'.concat(n).concat(v,'</p>\n            <p class="gm-questPopup__content--description">').concat(a,'</p>\n            <p class="gm-questPopup__content--reward--details">+ ').concat(s," coins</p>\n        </div>\n        ").concat(this.getQuestButton(c,i,h),"\n    "),c&&!i&&(g.classList.add("gm-questPopup__quest--pointer"),this.handleQuestClick(g,{redirectUrl:m,completionPaths:d,isDispatchable:p,event:o})),g}},{key:"getProgressRender",value:function(e){return'<span class="gm-questPopup__content--progress">'.concat(e.current,"/").concat(e.goal,"</span>")}},{key:"getProgressStyle",value:function(e){var t=e.current/e.goal*100;return'style="background: linear-gradient(90deg, #00B355 '.concat(t,"%, transparent ").concat(t,'%, transparent 100%)"')}},{key:"getQuestButton",value:function(e,t,n){return'\n        <div class="gm-questPopup__btn '.concat(e?"gm-questPopup__btn--active":""," ").concat(t?"gm-questPopup__btn--done":"",'">\n            <div class="gm-questPopup__btn--bg">\n                <img src="').concat(m,"/img/").concat(t?"check":"arrow",'.webp" alt="btn-status">\n            </div>\n            <div class="gm-questPopup__btn--gr" ').concat(n,"></div>\n        </div>\n    ")}},{key:"handleQuestClick",value:function(e,t){var n=this,a=t.redirectUrl,r=t.completionPaths,s=t.isDispatchable,o=t.event;e.addEventListener("click",function(e){e.stopPropagation(),n.handleRedirectQuestClick(o,a,r,s)})}},{key:"handleRedirectQuestClick",value:function(e,t,n,a){var r=null!=t?t:this.getNextCompletionPath(n);a&&C.publishCustomEvent(e),r&&window.open(r,"_blank")}},{key:"getNextCompletionPath",value:function(e){var t=localStorage.getItem("gm-visited_paths_expiring");t&&Date.now()>t&&(localStorage.removeItem("gm-visited_paths"),localStorage.removeItem("gm-visited_paths_expiring"));var n=new Set(JSON.parse(localStorage.getItem("gm-visited_paths")||"[]"));return e.find(function(e){return!n.has(e)})}},{key:"renderPopupRewards",value:function(){var e=document.querySelector('[data-element="gmQuestPopupRewardsBlock"]');this.renderPopupTitle(this.REWARDS_TAB),e&&!e.innerHTML&&this.renderRewardsComponents()}},{key:"renderRewardsComponents",value:function(){var e=document.querySelector('[data-element="gmQuestPopupRewardsBlock"]'),t=document.createElement("div");t.className="gm-rewardsPopup__statistic",t.append(this.renderRewardsDaysHeader(),this.renderRewardsDaysContent(),this.renderRewardsDaysBtn()),e.append(t,this.renderPurchasableBonuses(),this.renderOwnedBonuses()),localStorage.getItem("gm-bannerNewBonuses")||e.append(this.renderRewardsBanner())}},{key:"renderRewardsDaysHeader",value:function(){var e=this.DAY_COINS[this.visitor.visit_streak]?this.DAY_COINS[this.visitor.visit_streak]:this.DEFAULT_COIN,t="üí∞ Come tomorrow to earn ".concat(e," more coins."),n="üéÅ Unlock your mystery bonus after 5 days in a row!";5===this.visitor.visit_streak?(t='You can grab your bonus in the "My bonuses" section.',n="‚≠ê Keep going! Come back tomorrow for more coins"):this.visitor.visit_streak>5&&(t="üí∞ Come tomorrow to earn ".concat(e," more coins."),n="");var a=document.createElement("div");return a.className="gm-rewardsPopup__steak",a.innerHTML='<div class="gm-rewardsPopup__steak--img"><img src="'.concat(m,'/img/check.webp" alt="days_streak"></div><p class="gm-rewardsPopup__steak--title">Days on streak: ').concat(this.visitor.visit_streak,'</p>\n\t\t<div class="gm-rewardsPopup__steak--tooltip">\n\t\t\t<svg width="22" height="23" viewBox="0 0 22 23" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t<path d="M11 0.5C4.9346 0.5 0 5.43467 0 11.5001C0 17.5655 4.9346 22.5 11 22.5C17.0654 22.5 22 17.5655 22 11.5001C22 5.43467 17.0654 0.5 11 0.5ZM11 20.5C6.03733 20.5 2 16.4627 2 11.5001C2 6.53747 6.03733 2.5 11 2.5C15.9627 2.5 20 6.53747 20 11.5001C20 16.4627 15.9626 20.5 11 20.5Z" fill="#BBB8CC"/>\n\t\t<path d="M11.0001 5.1665C10.265 5.1665 9.66699 5.7649 9.66699 6.50044C9.66699 7.2353 10.265 7.83317 11.0001 7.83317C11.7351 7.83317 12.3331 7.2353 12.3331 6.50044C12.3331 5.7649 11.7351 5.1665 11.0001 5.1665Z" fill="#BBB8CC"/>\n\t\t<path d="M11 9.8335C10.4477 9.8335 10 10.2812 10 10.8335V16.8335C10 17.3858 10.4477 17.8335 11 17.8335C11.5523 17.8335 12 17.3858 12 16.8335V10.8335C12 10.2812 11.5523 9.8335 11 9.8335Z" fill="#BBB8CC"/>\n\t\t</svg>\n\t\t\t<div class="tooltip">\n\t\t\t\t<p>').concat(t,"</p>\n\t\t\t\t").concat(n&&"<p>".concat(n,"</p>"),"\n\t\t\t</div>\n\t\t</div>"),a}},{key:"renderRewardsDaysContent",value:function(){var e=document.createElement("div");e.className="gm-rewardsPopup__days";var t=this.visitor.visit_streak,n=this.DAY_COINS[t-1]?this.DAY_COINS[t-1]:this.DEFAULT_COIN,a=document.createElement("div");5!==t?(a.className="gm-rewardsPopup__day current",a.innerHTML='<span class="gm-rewardsPopup__day--title">Day '.concat(t,'</span>\n\t\t\t<div class="gm-rewardsPopup__day--body">\n\t\t\t\t<div class="gm-rewardsPopup__day--check"><img src="').concat(m,'/img/check.webp" alt="days_streak"></div>\n\t\t\t\t<span class="gm-rewardsPopup__day--value">+').concat(n,"</span>\n\t\t\t</div>")):(a.className="gm-rewardsPopup__day current mystery",a.innerHTML='<span class="gm-rewardsPopup__day--title">Day '.concat(t,'</span>\n\t\t\t<div class="gm-rewardsPopup__day--body">\n\t\t\t\t<img src="').concat(m,'/img/mysteryBonusCurrent.webp" class="gm-rewardsPopup__day--mystery" alt="mysteryBonusCurrent">\n\t\t\t\t<div class="gm-rewardsPopup__day--check"><img src="').concat(m,'/img/check.webp" alt="days_streak"></div>\n\t\t\t</div>')),e.append(a);for(var r=1;r<=4;r++){var s=t+r,o=document.createElement("div");o.className="gm-rewardsPopup__day",5===s?this.visitor.has_mystery_bonus?(o.classList.add("mystery"),o.innerHTML='<span class="gm-rewardsPopup__day--title">Day '.concat(s,'</span>\n\t\t\t\t\t<div class="gm-rewardsPopup__day--body">\n\t\t\t\t\t\t<img src="').concat(m,'/img/mysteryBonusCurrent.webp" class="gm-rewardsPopup__day--mystery" alt="mysteryBonusCurrent">\n\t\t\t\t\t\t<div class="gm-rewardsPopup__day--check"><img src="').concat(m,'/img/check.webp" alt="days_streak"></div>\n\t\t\t\t\t</div>')):o.innerHTML='<span class="gm-rewardsPopup__day--title">Day '.concat(s,'</span>\n\t\t\t\t\t<div class="gm-rewardsPopup__day--body mystery">\n\t\t\t\t\t\t<img src="').concat(m,'/img/mysteryBonus.webp" class="gm-rewardsPopup__day--img" alt="mysteryBonus">\n\t\t\t\t\t\t<span class="gm-rewardsPopup__day--value">Mystery bonus</span>\n\t\t\t\t\t</div>'):o.innerHTML='<span class="gm-rewardsPopup__day--title">Day '.concat(s,'</span>\n\t\t\t<div class="gm-rewardsPopup__day--body">\n\t\t\t\t<img src="').concat(m,'/img/coin.webp" class="gm-rewardsPopup__day--coin" alt="days_coin">\n\t\t\t\t<span class="gm-rewardsPopup__day--value">+').concat(this.DAY_COINS[s-1]?this.DAY_COINS[s-1]:this.DEFAULT_COIN,"</span>\n\t\t\t</div>"),e.append(o)}return e}},{key:"renderRewardsDaysBtn",value:function(){var e=this,t=document.createElement("button");return t.className="gm-rewardsPopup__extra",t.innerHTML="EARN EXTRA COINS",t.addEventListener("click",function(){return e.toggleTab(e.QUESTS_TAB)}),t}},{key:"renderPurchasableBonuses",value:function(){var e=this,t=document.createElement("div");t.className="gm-rewardsPopup__purchasable",t.dataset.element="gmRewardsPurchasable";var n=document.createElement("p");n.className="gm-purchasable__title",n.innerHTML="Use coins for bonuses",t.append(n);var a=document.createElement("div");return a.className="gm-purchasable__bonuses",a.dataset.element="gmBonuses",a.dataset.bonuses="gmPurchasableBonuses",t.append(a),this.purchasable.forEach(function(t){a.append(e.renderRewardsBonus(t))}),t}},{key:"renderOwnedBonuses",value:function(){var e=this,t=document.createElement("div");t.className="gm-rewardsPopup__purchasable",t.dataset.element="gmRewardsOwned";var n=document.createElement("p");n.className="gm-purchasable__title",n.innerHTML="My bonuses",t.append(n);var a=document.createElement("div");if(a.className="gm-purchasable__bonuses",a.dataset.element="gmBonuses",a.dataset.bonuses="gmOwnedBonuses",t.append(a),this.owned.length)this.owned.forEach(function(t){a.append(e.renderRewardsBonus(t,e.BONUS_STATUS.GET))});else{var r=document.createElement("div");r.className="gm-purchasable__empty",r.innerHTML='<p class="title">You don‚Äôt have any bonuses yet</p><p class="description">You can buy bonuses with earned coins in the shop</p>',a.append(r)}return t}},{key:"renderRewardsBonus",value:function(e,t){var n=this;t||(t=this.visitor.coins_balance>=e.price?this.BONUS_STATUS.BUY:this.BONUS_STATUS.MORE);var a=document.createElement("div");switch(a.dataset.id=e.id,a.className="gm-purchasable__bonus",t){case this.BONUS_STATUS.BUY:a.classList.add("buy");break;case this.BONUS_STATUS.MORE:a.classList.add("more");break;case this.BONUS_STATUS.GET:default:a.classList.add("get")}if(e.isMystery){var r=document.createElement("div");r.className="gm-purchasable__bonus--mystery",r.innerHTML='<img src="'.concat(m,'/img/mysteryBonus.webp" alt="mysteryBonus"> Mystery bonus'),a.append(r)}var s=document.createElement("div");s.className="gm-purchasable__bonus--header";var o=t===this.BONUS_STATUS.GET?'<a href="'.concat(e.casino.affiliateUrl,'" target="_blank" class="aff">').concat(e.casino.name,"</a>"):'<p class="name">'.concat(e.casino.name,"</p>");s.innerHTML='<div class="gm-purchasable__bonus--img" style="'.concat(this.getLogoStyle(e.casino.background),'">\n\t\t\t<img src="').concat(this.CDN_LOGO).concat(e.casino.logo,'" alt="').concat(e.casino.name,'" title="').concat(e.casino.name,'" class="card-logo-image" width="74" height="74">\n     </div>\n\t\t<div class="gm-purchasable__bonus--title">\n\t\t\t').concat(o,'\n\t\t\t<p class="title">').concat(e.titleShort,"</p>\n\t\t</div>");var i=document.createElement("div");if(i.className="gm-purchasable__bonus--body",e.code){var c=document.createElement("div");c.className="gm-purchasable__bonus--actions",t!==this.BONUS_STATUS.GET&&c.classList.add("inactive"),i.append(c);var l=document.createElement("div");l.className="gm-purchasable__bonus--promo",t!==this.BONUS_STATUS.GET&&l.classList.add("inactive"),l.innerHTML='<span class="code">'.concat(e.code,'</span><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 13H16.75V3H6.75V6.75M3 6.75H13V16.75H3V6.75Z" stroke="#403D4D" stroke-linecap="round" stroke-linejoin="round"/></svg>'),c.append(l),l.addEventListener("click",function(){n.promoCodeCopied(e.code,l),setTimeout(function(){p.click()},3e3)});var u=document.createElement("div");u.className="gm-purchasable__bonus--used";var d=+String(e.id).slice(-2)+51;u.innerHTML='<img src="'.concat(m,'/img/heart.webp" alt="heart" width="14" height="12.456">').concat(d," People used"),c.append(u)}var p=document.createElement("button");switch(p.className="gm-purchasable__bonus--btn",e.code&&p.classList.add("promo"),t){case this.BONUS_STATUS.BUY:p.classList.add("buy"),p.innerHTML='<div class="coin"><img src="'.concat(m,'/img/coin.webp" alt="coin" width="20" height="20"> ').concat(e.price,'</div><span class="text">BUY now</span>'),p.addEventListener("click",function(){return n.renderTradePopup(e)});break;case this.BONUS_STATUS.MORE:p.classList.add("more"),p.innerHTML='<div class="coin"><img src="'.concat(m,'/img/coin.webp" alt="coin" width="20" height="20"> ').concat(e.price,'</div><span class="text">NEED MORE COINS</span>'),p.addEventListener("click",function(){return n.renderNeedPopup(e)});break;case this.BONUS_STATUS.GET:default:p.classList.add("get"),p.innerHTML='<span class="text">GET BONUS</span>',p.addEventListener("click",function(){return window.open(e.casino.affiliateUrl,"_blank")})}return i.append(p),a.append(s,i),a}},{key:"getLogoStyle",value:function(e){if("FFFFFF"===e)return"border: 1px solid #DBD8D8;";var t=this.hexToHsl(e),n=this.hexToHsl(e,50);return" background: linear-gradient(220deg, ".concat(t,", ").concat(n,");")}},{key:"hexToHsl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e||(e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"000000"),e=e.replace(/^#/,"");var n=parseInt(e.slice(0,2),16)/255,a=parseInt(e.slice(2,4),16)/255,r=parseInt(e.slice(4,6),16)/255,s=Math.max(n,a,r),o=Math.min(n,a,r),i=s-o,c=0,l=0,u=(s+o)/2;if(0!==i){switch(l=i/(1-Math.abs(2*u-1)),s){case n:c=(a-r)/i+(a<r?6:0);break;case a:c=(r-n)/i+2;break;case r:c=(n-a)/i+4}c/=6}return c=Math.round(360*c),l=Math.round(100*l),u=t||Math.round(100*u),"hsl(".concat(c,", ").concat(l,"%, ").concat(u,"%)")}},{key:"promoCodeCopied",value:function(e,t){var n=t.querySelector(".code"),a=n.innerHTML;this.copyText(e).then(function(){t.classList.add("copied"),n.innerHTML="Copied!",setTimeout(function(){t.classList.remove("copied"),n.innerHTML=a},1500)})}},{key:"copyText",value:function(e){return navigator.clipboard.writeText(e)}},{key:"renderRewardsBanner",value:function(){var e=document.createElement("div");e.className="gm-rewardsPopup__banner",e.dataset.element="gmRewardsBanner",e.innerHTML='\n    <img src="'.concat(m,'/img/banner.webp" alt="banner" width="115.373" height="137.748">\n    <div class="content">\n      <p class="title">New bonuses appear every 1-2 weeks!</p>\n      <p class="description">Gather coins for exclusive shop rewards</p>\n    </div>\n  ');var t=new IntersectionObserver(function(n){n.forEach(function(n){n.isIntersecting&&(localStorage.setItem("gm-bannerNewBonuses",JSON.stringify(!0)),t.unobserve(e))})},{threshold:.5});return t.observe(e),e}},{key:"renderPopupTitle",value:function(e){var t="",n="";switch(e){case this.REWARDS_TAB:t="My Rewards",n="Use your coins to get exclusive bonuses!";break;case this.QUESTS_TAB:default:t="Quests",n="Earn coins - spend them on exclusive bonuses"}var a=document.querySelector('[ data-element="gm-questPopupTitle"]');a&&(a.innerHTML=t);var r=document.querySelector('[ data-element="gm-questPopupDescription"]');r&&(r.innerHTML=n)}},{key:"renderTradePopup",value:function(e){var t=this,a=document.createElement("div");a.className="gm-tradePopup__wrapper";var r=document.createElement("div");r.className="gm-tradePopup__popup",a.append(r);var s=document.createElement("p");s.className="gm-tradePopup__title",s.innerHTML="Trade your coins for a bonus?",r.append(s);var o=document.createElement("div");o.className="gm-tradePopup__btns",r.append(o);var i=document.createElement("button");i.className="gm-tradePopup__btn approve",i.innerHTML="YES, let‚Äôs do it!",i.addEventListener("click",n(c().m(function n(){var r;return c().w(function(n){for(;;)switch(n.n){case 0:return i.classList.add("loading"),i.innerHTML='<img src="'.concat(m,'/img/loading.webp" alt="loading">'),n.n=1,_(t.visitor.id,e.id);case 1:r=n.v,r.success&&(t.updateBonus(e),t.removeEmptyOwned()),a.remove();case 2:return n.a(2)}},n)}))),o.append(i);var l=document.createElement("button");l.className="gm-tradePopup__btn cancel",l.innerHTML="No, cancel",l.addEventListener("click",function(){return a.remove()}),o.append(l),document.body.append(a)}},{key:"removeEmptyOwned",value:function(){var e=document.querySelector(".gm-purchasable__empty");e&&e.remove()}},{key:"renderNeedPopup",value:function(){var e=this,t=document.createElement("div");t.className="gm-tradePopup__wrapper";var n=document.createElement("div");n.className="gm-tradePopup__popup",t.append(n);var a=document.createElement("p");a.className="gm-tradePopup__title",a.innerHTML="Collect more coins to grab this bonus!",n.append(a);var r=document.createElement("div");r.className="gm-tradePopup__btns",n.append(r);var s=document.createElement("button");s.className="gm-tradePopup__btn approve",s.innerHTML="EARN MORE COINS",s.addEventListener("click",function(){e.toggleTab(e.QUESTS_TAB),t.remove()}),r.append(s);var o=document.createElement("button");o.className="gm-tradePopup__btn cancel",o.innerHTML="Back to the shop",o.addEventListener("click",function(){return t.remove()}),r.append(o),document.body.append(t)}},{key:"updateCarousel",value:function(){document.querySelectorAll(".gm-rewardsPopup__purchasable").forEach(function(e){var t=e.querySelector('[data-element="gmBonuses"]');if(t){t._carouselScrollListener&&(t.removeEventListener("scroll",t._carouselScrollListener),t._carouselScrollListener=null);var n=e.querySelector(".gm-carousel-indicators");n&&n.remove()}}),this.bonusesCarousel()}},{key:"bonusesCarousel",value:function(){document.querySelectorAll(".gm-rewardsPopup__purchasable").forEach(function(e){var t=e.querySelector('[data-element="gmBonuses"]');if(t){var n=Array.from(t.querySelectorAll(".gm-purchasable__bonus"));if(n.length&&1!==n.length){t.classList.add("gm-carousel");var a=e.querySelector(".gm-carousel-indicators");a&&a.remove(),t._carouselScrollListener&&(t.removeEventListener("scroll",t._carouselScrollListener),t._carouselScrollListener=null),t._carouselSnapListener&&(t.removeEventListener("scroll",t._carouselSnapListener),t._carouselSnapListener=null);var r=document.createElement("div");r.className="gm-carousel-indicators",n.length>15&&r.classList.add("flex-start"),n.forEach(function(e,t){var n=document.createElement("div");n.className="dot"+(0===t?" active":""),n.dataset.index=t,r.appendChild(n)}),e.appendChild(r);var s=Array.from(r.querySelectorAll(".dot")),o=function(){var e=t.getBoundingClientRect(),a=e.left+e.width/2,r=0,s=1/0;return n.forEach(function(e,t){var n=e.getBoundingClientRect(),o=n.left+n.width/2,i=Math.abs(o-a);i<s&&(s=i,r=t)}),r},i=function(e){s.forEach(function(t,n){return t.classList.toggle("active",n===e)});var t=s[e];if(t){var n=r.getBoundingClientRect(),a=t.getBoundingClientRect(),o=a.left+a.width/2-(n.left+n.width/2),i=r.scrollLeft+o;r.scrollTo({left:i,behavior:"smooth"})}},c=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n[e].offsetLeft-t.offsetLeft;t.scrollTo({left:r,behavior:a?"smooth":"auto"}),i(e)};s.forEach(function(e){e.addEventListener("click",function(){var t=Number(e.dataset.index);c(t)})});var l,u=!1,d=function(){u||(window.requestAnimationFrame(function(){i(o()),u=!1}),u=!0)};t._carouselScrollListener=d,t.addEventListener("scroll",d,{passive:!0});var m=function(){var e=o(),a=n[e],r=t.getBoundingClientRect(),s=r.left+r.width/2,l=a.getBoundingClientRect(),u=l.left+l.width/2;Math.abs(u-s)>5?c(e,!1):i(e)},p=function(){clearTimeout(l),l=setTimeout(m,200)};t._carouselSnapListener=p,t.addEventListener("scroll",p,{passive:!0}),requestAnimationFrame(function(){return i(o())}),window.addEventListener("resize",function(){return i(o())})}}})}},{key:"handleOngoingQuest",value:function(){var e=window.location.pathname,t=new Set(JSON.parse(localStorage.getItem("gm-visited_paths")||"[]")),n=function(){C.publishCustomEvent("pageVisited",{path:e}),t.add(e);var n=new Date,a=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()+1,0,0,0)).getTime();localStorage.setItem("gm-visited_paths",JSON.stringify(u(t))),localStorage.setItem("gm-visited_paths_expiring",a)},a=this.quests.find(function(n){return n.completionPaths.some(function(n){return!t.has(n)&&n===e})});if(a){var r=a.isTimerDisplayed,s=a.timerDuration;r?this.renderBodyTimer(s,n):n()}}},{key:"updateQuest",value:function(e){var t=this.quests.findIndex(function(t){return t.id===e.id});if(-1!==t){this.quests[t]=i(i(i({},this.quests[t]),e),{},{progress:i(i({},this.quests[t].progress),{},{current:this.quests[t].progress.current+1})});var n=document.querySelector('[data-element="gmQuestPopupQuestsBlock"] .gm-questPopup__quest[data-id="'.concat(e.id,'"]'));if(n){var a=this.renderQuest(this.quests[t]);n.replaceWith(a)}}}},{key:"updateBonus",value:function(e){var t=this.purchasable.findIndex(function(t){return t.id===e.id});if(-1!==t){var n=this.purchasable[t];this.purchasable.splice(t,1),this.owned.unshift(n);var a=document.querySelector('[data-bonuses="gmPurchasableBonuses"] .gm-purchasable__bonus[data-id="'.concat(e.id,'"]'));if(a){a.remove();var r=document.querySelector('[data-bonuses="gmOwnedBonuses"]');r&&r.prepend(this.renderRewardsBonus(e,this.BONUS_STATUS.GET)),this.updateCarousel(),r.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}}}},{key:"updatePurchasableBonuses",value:function(){var e=this,t=document.querySelector('[data-bonuses="gmPurchasableBonuses"]');t&&(t.innerHTML="",this.purchasable.forEach(function(n){t.append(e.renderRewardsBonus(n))})),this.updateCarousel()}},{key:"renderMysteryBonus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={id:e.id,casino:{name:e.casino_name,domain:e.casino_domain,logo:e.casino_logo,background:e.casino_background,affiliateUrl:e.affiliate_url},code:null,specialButtonTitle:null,animatedButton:null,titleLong:e.title_long,titleShort:e.title_short,isMystery:!0};this.removeEmptyOwned();var n=document.querySelector('[data-bonuses="gmOwnedBonuses"]');n&&(n.prepend(this.renderRewardsBonus(t,this.BONUS_STATUS.GET)),n.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}))}},{key:"coinAnimation",value:function(){var e=this,t=document.createElement("div");t.id="coinsAnimationBlock",t.className="gm-coinsAnimationBlock";for(var n=new Audio("".concat(m,"/sound/sell.wav")),a=1;a<=3;a++){var r=document.createElement("img");r.id="coin_".concat(a),r.src="".concat(m,"/img/coin.webp"),t.append(r)}this.bodyQuest.append(t);var s=function(a,r){var s=t.querySelector("#".concat(a)),o=e.headerQuest.querySelector("img"),i=o.getBoundingClientRect(),c=s.getBoundingClientRect();s.style.position="fixed",s.style.top="".concat(c.top,"px"),s.style.right="".concat(c.right,"px"),s.style.left="".concat(c.left,"px"),s.style.zIndex="100",setTimeout(function(){s.style.top=i.top+(o.offsetHeight/2-s.offsetHeight/2)+12+"px",s.style.left=i.left+(o.offsetWidth/2-s.offsetWidth/2)+12+"px",s.style.width="20px",s.style.height="20px",s.style.minHeight="20px",s.style.minWidth="20px",s.style.opacity="0",s.style.transition="top 1s ease-in-out, left 1s ease-in-out, opacity 1.5s ease-in-out","visible"===document.visibilityState&&n.play()},r)};s("coin_1",100),s("coin_2",200),s("coin_3",300),setTimeout(function(){t.remove()},2e3)}},{key:"getSuccessMessage",value:function(e,t){return null!=t&&t.casinoName?'<img src="'.concat(m,'/img/star.webp" alt="star" width="24" height="24">+').concat(e," coins for joining ").concat(t.casinoName):'<img src="'.concat(m,'/img/star.webp" alt="star" width="24" height="24"> +').concat(e," coins on your balance")}},{key:"questBadge",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"üî• +10 coins on your balance",t=document.querySelector(".gm-questBadge__wrapper");t||((t=document.createElement("div")).className="gm-questBadge__wrapper",document.body.append(t));var n=document.createElement("div");n.className="gm-questBadge__block",n.innerHTML=e,t.append(n),setTimeout(function(){n.classList.add("hide"),setTimeout(function(){n.remove(),!t.querySelectorAll(".gm-questBadge__block").length&&t.remove()},600)},2e3)}}])}(),N=new B;document.addEventListener("questUpdated",function(e){var t=e.detail;N.updateQuest(t.quest)}),document.addEventListener("balanceChanged",function(e){var t=e.detail,n=t.balanceChange,a=t.questDetails;if(n>0){N.coinAnimation();var r=N.getSuccessMessage(n,a);N.questBadge(r)}N.setVisitorCoinBalance(n),N.setHeaderCoinBalance(),N.updatePurchasableBonuses()}),document.addEventListener("rewardRedeemed",function(e){var t=e.detail.reward;N.renderMysteryBonus(t)});var q=new(function(){return r(function e(){a(this,e)},[{key:"init",value:function(){this.handleGamificationReady(),this.handleBonusClicks()}},{key:"handleGamificationReady",value:function(){document.addEventListener("gamification:ready",function(e){var t=e.detail;N.fetchData(t)})}},{key:"handleBonusClicks",value:function(){document.querySelectorAll("[data-placement]").forEach(function(e){e.addEventListener("click",function(t){var n=t.target.closest(".white-card, .black-card");n&&C.publishCustomEvent("bonusClicked",{category:e.dataset.placement,affiliateUrl:n.dataset.affiliateUrl})})})}}])}()),H=function(){return r(function e(){a(this,e),s(this,"TARGET_ELEMENT",document.querySelector("#gmWheelBanner")),s(this,"toggleBodyScrollLock",function(e){if(e){var t=window.scrollY;document.body.dataset.scrollY=t,document.body.style.position="fixed",document.body.style.top="-".concat(t,"px"),document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%"}else{var n=parseInt(document.body.dataset.scrollY||"0",10);document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",window.scrollTo(0,n)}})},[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.TARGET_ELEMENT;!localStorage.getItem("gm-contactsPopup")&&this.renderBanner(e)}},{key:"renderBanner",value:function(e){var t=this;e&&(e.className="gm-wheel__banner",e.dataset.element="gmWheelBanner",e.innerHTML='<p class="title">üéÅ Try your luck and <span class="description">win a reward</span></p>\n\t\t\t<div class="btn__container"><button class="btn">SPIN THE WHEEL</button></div>\n\t\t\t<div class="circle">\n\t\t\t\t<img src="'.concat(m,'/img/wheel/wheel-auth.webp" class="circle__block" alt="wheel-auth" width="20" height="20">\n\t\t\t\t<img src="').concat(m,'/img/wheel/wheel-auth-box.webp" class="circle__box" alt="wheel-auth-box" width="20" height="20">\n\t\t\t</div>'),e.addEventListener("click",function(e){e.stopPropagation(),t.renderWheelPopup.call(t)}))}},{key:"renderWheelPopup",value:function(){var e=document.createElement("div");e.dataset.element="gmWheelWrapper",e.className="gm-wheel__wrapper";var t=document.createElement("div");t.className="gm-wheel__popup",t.addEventListener("click",function(e){return e.stopPropagation()}),e.append(t);var n=document.createElement("div");n.className="gm-wheel__container",n.dataset.element="gmWheelContainer",t.append(n,this.generatePopupCloseBtn());var a=document.createElement("div");a.className="gm-wheel__card title__mob",a.append(this.generateActionTitle());var r=document.createElement("div");r.className="gm-wheel__card",r.append(this.generateWheel());var s=document.createElement("div");s.className="gm-wheel__card",s.append(this.generateAction()),n.append(a,r,s),document.body.append(e),this.toggleBodyScrollLock(!0),document.body.addEventListener("click",this.closePopup.bind(this))}},{key:"generateWheel",value:function(){var e=document.createElement("div");e.className="wheels__wrapper";var t=document.createElement("div");t.className="wheels__circle";var n=document.createElement("div");n.className="wheels__circle--inner";var a=this.generateWheelLabel(),r=this.generateWheelSectors(),s=this.generateWheelCenterPin();return n.append.apply(n,u(r).concat(u(s))),t.append(n),e.append.apply(e,[t].concat(u(a))),e}},{key:"generateWheelLabel",value:function(){var e=document.createElement("div");e.className="wheels__label--down";var t=document.createElement("div");return t.className="wheels__label--up",[e,t]}},{key:"generateWheelSectors",value:function(){var e=document.createElement("div");e.className="wheels__content";var t="No Luck",n="Next Time",a="First Look Deals",r="Early VIP Access",s="Best Bonus Alerts",o=[t,n,"Best Bonus Alerts",a,r,s,t,n,r,a,s,r];o.forEach(function(t,n){var a=document.createElement("div");a.className="wheels__sector",e.append(a)});var i=document.createElement("div");return i.className="wheels__labels",o.forEach(function(e,t){var n=document.createElement("p");n.innerHTML="<span>".concat(e,"</span>"),i.append(n)}),[e,i]}},{key:"generateWheelCenterPin",value:function(){var e=document.createElement("div");e.className="wheels__center";var t=document.createElement("div");return t.className="wheels__center--pin",[e,t]}},{key:"generateAction",value:function(){var e=document.createElement("div");e.className="gm-wheel__action";var t=document.createElement("p");t.className="title",t.dataset.element="gmWheelActionTitle",t.innerHTML="Find Out What‚Äôs Waiting for You üîÆ";var n=document.createElement("button");return n.className="btn",n.dataset.element="gmWheelActionBtn",n.innerHTML="SPIN TO WIN!",n.addEventListener("click",this.spinWheel.bind(this)),e.append(t,n),e}},{key:"spinWheel",value:function(){document.querySelectorAll('[data-element="gmWheelActionTitle"]').forEach(function(e){return e.innerHTML='Exciting, right?<span class="description">Loading your reward</span>'});var e=document.querySelector('[data-element="gmWheelActionBtn"]');e&&(e.classList.add("loading"),e.innerHTML='<img src="'.concat(m,'/img/loading.webp" alt="loading">'));var t="spinWheel",n=document.querySelector(".wheels__content");n.classList.add("rotation"),n.classList.add(t);var a=document.querySelector(".wheels__labels");a.classList.add("rotation"),a.classList.add(t),setTimeout(this.renderWheelEmail.bind(this),3500)}},{key:"renderWheelEmail",value:function(){var e=document.querySelector('[data-element="gmWheelContainer"]');if(e){e.innerHTML="";var t=document.createElement("div");t.className="gm-wheel__success";var n=document.createElement("p");n.className="title",n.innerHTML='"Early VIP Access" Unlocked!';var a=document.createElement("p");a.className="description",a.innerHTML="Be the first to receive top offers that haven‚Äôt even hit the site yet.";var r=document.createElement("div");r.className="posts",r.innerHTML='<div class="alert"><div class="bell"><img src="'.concat(m,'/img/bell.webp" alt="bell"></div><div class="number">39+</div></div><div class="message"></div><div class="message"></div><div class="message"><div class="icon"><img src="').concat(m,'/img/message.webp" alt="message"></div><div class="content"><p class="text">üî• Free Spins Just Dropped</p><p class="info">Be first to grab these new offers</p></div></div>'),t.append(n,a,r,this.renderContactForm()),e.append(t)}}},{key:"renderContactForm",value:function(){var e=this,t=document.createElement("form");return t.className="form",t.innerHTML='<input type="email" id="gmWheelFormEmail" placeholder="Email" required><p class="error">Invalid email format. Please try again</p><button id="gmWheelFormBtn">Get reward</button>',t.addEventListener("submit",function(){var a=n(c().m(function n(a){var r,s,o;return c().w(function(n){for(;;)switch(n.p=n.n){case 0:return a.preventDefault(),t.classList.contains("error")&&t.classList.remove("error"),(r=t.querySelector("#gmWheelFormBtn")).classList.add("loading"),r.innerHTML='<img src="'.concat(m,'/img/loading.webp" alt="loading">'),s=t.querySelector("#gmWheelFormEmail").value,n.p=1,n.n=2,E(s);case 2:e.renderWheelSuccess(),e.setPopupStorage(),n.n=4;break;case 3:n.p=3,o=n.v,console.log(o),t.classList.add("error"),r.classList.remove("loading"),r.innerHTML="GET REWARD";case 4:return n.a(2)}},n,null,[[1,3]])}));return function(e){return a.apply(this,arguments)}}()),t}},{key:"renderWheelSuccess",value:function(){var e=this,t=document.querySelector('[data-element="gmWheelContainer"]');if(t){t.innerHTML="";var n=document.createElement("div");n.className="gm-wheel__success hide";var a=document.createElement("p");a.className="title",a.innerHTML="Early Access Granted!";var r=document.createElement("p");r.className="description",r.innerHTML="You‚Äôll be the first to get our newest bonus offers üíå";var s=document.createElement("div");s.className="granted",s.innerHTML='<img src="'.concat(m,'/img/granted.webp" alt="granted">'),n.append(a,r,s),t.append(n),setTimeout(function(){n.classList.add("show"),e.questBadge()},100)}}},{key:"generateActionTitle",value:function(){var e=document.createElement("p");return e.className="title",e.dataset.element="gmWheelActionTitle",e.innerHTML="Find Out What‚Äôs Waiting for You üîÆ",e}},{key:"generatePopupCloseBtn",value:function(){var e=this,t=document.createElement("button");return t.className="gm-wheel__close",t.innerHTML='<img src="'.concat(m,'/img/close.webp" alt="close">'),t.addEventListener("click",function(){return e.closePopup()}),t}},{key:"closePopup",value:function(){var e=document.querySelector('[data-element="gmWheelWrapper"]');e&&(e.remove(),this.toggleBodyScrollLock(!1))}},{key:"setPopupStorage",value:function(){localStorage.setItem("gm-contactsPopup",JSON.stringify(!0));var e=document.querySelector('[data-element="gmWheelBanner"]');e&&e.remove();var t=document.querySelector('[data-element="gmContactsHeader"]');t&&t.remove()}},{key:"questBadge",value:function(){var e=document.querySelector(".gm-questBadge__wrapper");e||((e=document.createElement("div")).className="gm-questBadge__wrapper",document.body.append(e));var t=document.createElement("div");t.className="gm-questBadge__block",t.innerHTML='<img src="'.concat(m,'/img/check__green.webp" class="check" alt="check" width="24" height="24"> You\'re subscribed now!'),e.append(t),setTimeout(function(){t.classList.add("hide"),setTimeout(function(){t.remove(),!e.querySelectorAll(".gm-questBadge__block").length&&e.remove()},600)},2e3)}}])}(),M=new H,A=function(){return r(function e(){a(this,e),s(this,"HEADER",document.querySelector("#gmHeaderGift")),s(this,"toggleBodyScrollLock",function(e){if(e){var t=window.scrollY;document.body.dataset.scrollY=t,document.body.style.position="fixed",document.body.style.top="-".concat(t,"px"),document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%"}else{var n=parseInt(document.body.dataset.scrollY||"0",10);document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",window.scrollTo(0,n)}})},[{key:"init",value:function(){!localStorage.getItem("gm-contactsPopup")&&this.renderHeaderBtn()}},{key:"renderHeaderBtn",value:function(){var e=this;this.HEADER&&(this.HEADER.className="gm-contacts__header",this.HEADER.dataset.element="gmContactsHeader",this.HEADER.innerHTML='<img src="'.concat(m,'/img/present.webp" alt="present" width="31" height="25"><span class="indicator"></span>'),this.HEADER.addEventListener("click",function(t){t.stopPropagation(),e.renderContactsPopup.call(e)}))}},{key:"renderContactsPopup",value:function(){var e=document.createElement("div");e.dataset.element="gmContactsWrapper",e.className="gm-contacts__wrapper";var t=document.createElement("div");t.className="gm-contacts__popup",t.addEventListener("click",function(e){return e.stopPropagation()}),e.append(t);var n=document.createElement("button");n.className="gm-contacts__close",n.innerHTML='<img src="'.concat(m,'/img/close.webp" alt="close">'),n.addEventListener("click",this.closePopup.bind(this)),t.append(n);var a=document.createElement("div");a.className="gm-contacts__container",a.dataset.element="gmContactsContainer",t.append(a);var r=document.createElement("div");r.className="gm-contacts__card",r.innerHTML='<img src="'.concat(m,'/img/gift.webp" alt="gift" class="gm-contacts__gift">'),a.append(r);var s=document.createElement("div");s.className="gm-contacts__card",s.append(this.renderRightCard()),a.append(s),document.body.append(e),this.toggleBodyScrollLock(!0),document.body.addEventListener("click",this.closePopup.bind(this))}},{key:"renderRightCard",value:function(){var e=document.createElement("div");e.className="gm-contacts__content";var t=document.createElement("p");t.className="title",t.innerHTML="Join us now!";var n=document.createElement("p");return n.className="description",n.innerHTML="To get exclusive offers in your inbox üì©",e.append(t,n,this.renderContactForm()),e}},{key:"renderContactForm",value:function(){var e=this,t=document.createElement("form");return t.className="form",t.innerHTML='<input type="email" id="gmContactFormEmail" placeholder="Email" required><p class="error">Invalid email format. Please try again</p><button id="gmContactFormBtn">Subscribe now</button>',t.addEventListener("submit",function(){var a=n(c().m(function n(a){var r,s,o;return c().w(function(n){for(;;)switch(n.p=n.n){case 0:return a.preventDefault(),t.classList.contains("error")&&t.classList.remove("error"),(r=t.querySelector("#gmContactFormBtn")).classList.add("loading"),r.innerHTML='<img src="'.concat(m,'/img/loading.webp" alt="loading">'),s=t.querySelector("#gmContactFormEmail").value,n.p=1,n.n=2,E(s);case 2:e.renderSuccess(),e.setPopupStorage(),n.n=4;break;case 3:n.p=3,o=n.v,console.log(o),t.classList.add("error"),r.classList.remove("loading"),r.innerHTML="GET REWARD";case 4:return n.a(2)}},n,null,[[1,3]])}));return function(e){return a.apply(this,arguments)}}()),t}},{key:"renderSuccess",value:function(){var e=this,t=document.querySelector('[data-element="gmContactsContainer"]');if(t){t.innerHTML="";var n=document.createElement("div");n.className="gm-contacts__success hide";var a=document.createElement("p");a.className="title",a.innerHTML="You're all set!";var r=document.createElement("p");r.className="description",r.innerHTML="You‚Äôll start getting our best bonus offers by email üéÅ";var s=document.createElement("div");s.className="granted",s.innerHTML='<img src="'.concat(m,'/img/granted.webp" alt="granted">'),n.append(a,r,s),t.append(n),setTimeout(function(){n.classList.add("show"),e.questBadge()},100)}}},{key:"setPopupStorage",value:function(){localStorage.setItem("gm-contactsPopup",JSON.stringify(!0));var e=document.querySelector('[data-element="gmWheelBanner"]');e&&e.remove();var t=document.querySelector('[data-element="gmContactsHeader"]');t&&t.remove()}},{key:"closePopup",value:function(){var e=document.querySelector('[data-element="gmContactsWrapper"]');e&&(e.remove(),this.toggleBodyScrollLock(!1))}},{key:"questBadge",value:function(){var e=document.querySelector(".gm-questBadge__wrapper");e||((e=document.createElement("div")).className="gm-questBadge__wrapper",document.body.append(e));var t=document.createElement("div");t.className="gm-questBadge__block",t.innerHTML='<img src="'.concat(m,'/img/check__green.webp" class="check" alt="check" width="24" height="24"> You‚Äôre subscribed now!'),e.append(t),setTimeout(function(){t.classList.add("hide"),setTimeout(function(){t.remove(),!e.querySelectorAll(".gm-questBadge__block").length&&e.remove()},600)},2e3)}}])}(),O=new A;function D(){return R.apply(this,arguments)}function R(){return(R=n(c().m(function e(){var t,n,a,r,s;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,M.init(),O.init(),N.init(),q.init(),e.n=1,g();case 1:return t=e.v,e.n=2,y();case 2:return n=e.v,a=n.visitor,r=n.centrifugo_token,e.n=3,C.init(a.id,r);case 3:document.dispatchEvent(new CustomEvent("gamification:ready",{detail:{deviceId:t,data:n}})),e.n=5;break;case 4:e.p=4,s=e.v,console.error("Gamification initialization failed",s.message),document.dispatchEvent(new CustomEvent("gamification:error",{detail:s}));case 5:return e.a(2)}},e,null,[[0,4]])}))).apply(this,arguments)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return D().catch(function(e){return console.error("Boot failed:",e)})}):D().catch(function(e){return console.error("Boot failed:",e)})}();
